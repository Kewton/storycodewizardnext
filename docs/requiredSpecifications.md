# 要求仕様書

## プロジェクト名称
StoryCodeWizard

## 目的
本プロジェクトの目的は、ストーリーベースの要件を用いて最適なコード生成をサポートするアプリケーションを提供することです。ユーザーの入力を基に、適切なプログラム言語を選択し、履歴管理およびダウンロード可能な実行結果を提供することで開発体験を向上させます。

## 機能要件

### 1. プロジェクト管理機能
- 新しいプロジェクトの作成
- プロジェクトのディレクトリパスの設定
- プロジェクトの履歴保存および削除
- プロジェクト一覧の表示と削除

### 2. コード生成機能
- ストーリーや要件を基にしたコード生成プロセスを提供
- 入力ウィジェットを用いて、対話的に要件を入力
- 選択可能なプログラミングモデル (例: `FastAPI`, `Streamlit`, `Next.js`)
- 利用可能なLLM（大規模言語モデル）の選択
  - 利用可能なモデル: `OpenAI GPTシリーズ`, `Claude (Anthropic)`, `Gemini`

### 3. 履歴管理機能
- 履歴をプロジェクトごとに閲覧可能
- 履歴の削除、ダウンロード機能
  - ダウンロード形式: Markdown (`Your Context` と `Agent Context`)

### 4. UI/UX
- Streamlitを利用したユーザーインターフェース
- ワイド画面レイアウトの利用
- タブを用いたページ構成
  - `Stroy2Code`: コード生成
  - `MyHistory`: 履歴表示と操作
  - `Project List`: プロジェクト管理
- ユーザーに直感的な操作を提供

### 5. アラート機能
- プロジェクト作成時、ディレクトリパスが無効またはプロジェクト名未設定の場合、適切なエラーメッセージを表示
- 履歴削除前には確認を促すダイアログを表示

## 非機能要件

### 1. 可読性
- PythonコードはGoogleスタイル形式のDocstringを利用
- flake8によるコード規約遵守

### 2. 拡張性
- モジュール構成の明確化
- 将来的なプログラミングモデルやLLMモデルの追加を容易にする設計

### 3. テスト
- pytestを用いた包括的なテストを提供
- 例: `tests/test_chat.py` が `communicate` 関数の基本動作をカバー

### 4. ドキュメント
- ユーザー向けのREADMEおよび要求仕様書を用意
- `docs/`ディレクトリにドキュメントを格納

## 制約条件
- Streamlitを利用してフロントエンドを構築
- 開発環境はPython >= 3.9 の仮想環境を推奨
- SQLiteをデータベースとして採用

## 技術詳細
### ディレクトリ構成
- メインディレクトリ: `StoryCodeWizard`
- アプリ構成: `app` ディレクトリ配下に各種モジュールを分類
- 履歴データ: `./mydb/` ディレクトリで管理

### 使用ライブラリ
- 必須ライブラリは `requirements.txt` に記載済み
- 新規ライブラリ追加時は `pip install` コマンドを提供

### テスト
- pytestを用いてユニットテストを作成
- テスト実行コマンド:
  ```bash
  pytest